<UserControl xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:vm="clr-namespace:ZenitelConnectProOperator.ViewModels" x:Class="ZenitelConnectProOperator.Views.CallForwardingView" x:DataType="vm:CallForwardingViewModel" xmlns:views="clr-namespace:ZenitelConnectProOperator.Views" mc:Ignorable="d"><Design.DataContext><vm:CallForwardingViewModel /></Design.DataContext><Border Padding="12" CornerRadius="8" BorderThickness="1"><Grid RowDefinitions="Auto,Auto,Auto,*,Auto"><TextBlock Text="Call Forwarding" FontSize="16" FontWeight="SemiBold"/><Border Grid.Row="1" Padding="12,8" CornerRadius="6" Background="#0A000000" Margin="0,8,0,8"><StackPanel Spacing="8"><TextBlock Text="Add / Update Rule" FontWeight="SemiBold" FontSize="13"/><StackPanel Orientation="Horizontal" Spacing="8"><StackPanel Spacing="2"><TextBlock Text="Dirno" FontSize="11" Opacity="0.7"/><TextBox Text="{Binding NewDirno}" Width="100" Watermark="e.g. 1000"/></StackPanel><StackPanel Spacing="2"><TextBlock Text="Forward To" FontSize="11" Opacity="0.7"/><TextBox Text="{Binding NewFwdTo}" Width="100" Watermark="e.g. 1010"/></StackPanel><StackPanel Spacing="2"><TextBlock Text="Type" FontSize="11" Opacity="0.7"/><ComboBox ItemsSource="{Binding FwdTypeOptions}" SelectedIndex="{Binding NewFwdTypeIndex}" Width="140"/></StackPanel><StackPanel Spacing="2"><TextBlock Text="Enabled" FontSize="11" Opacity="0.7"/><CheckBox IsChecked="{Binding NewEnabled}" VerticalAlignment="Center" Margin="0,4,0,0"/></StackPanel><Button Content="Add Rule" Command="{Binding AddRuleCommand}" VerticalAlignment="Bottom" IsEnabled="{Binding !IsBusy}"/></StackPanel></StackPanel></Border><Border Grid.Row="2" Padding="12,6" CornerRadius="4" Background="Transparent" Margin="0,4,0,4"><Grid ColumnDefinitions="100,140,100,100,200"><TextBlock Grid.Column="0" Text="DIRNO" FontWeight="SemiBold" FontSize="12" Opacity="0.8"/><TextBlock Grid.Column="1" Text="Type" FontWeight="SemiBold" FontSize="12" Opacity="0.8"/><TextBlock Grid.Column="2" Text="Forward To" FontWeight="SemiBold" FontSize="12" Opacity="0.8"/><TextBlock Grid.Column="3" Text="Enabled" FontWeight="SemiBold" FontSize="12" Opacity="0.8"/><TextBlock Grid.Column="4" Text="Actions" FontWeight="SemiBold" FontSize="12" Opacity="0.8"/></Grid></Border><ScrollViewer Grid.Row="3"><ItemsControl ItemsSource="{Binding Rules}"><ItemsControl.ItemsPanel><ItemsPanelTemplate><StackPanel Spacing="2"/></ItemsPanelTemplate></ItemsControl.ItemsPanel><ItemsControl.ItemTemplate><DataTemplate x:DataType="vm:CallForwardingRuleViewModel"><Border Classes="ruleRow"><Grid ColumnDefinitions="100,140,100,100,200"><TextBlock Grid.Column="0" Text="{Binding Dirno}" FontWeight="SemiBold" VerticalAlignment="Center"/><TextBlock Grid.Column="1" Text="{Binding FwdTypeDisplay}" VerticalAlignment="Center"/><TextBlock Grid.Column="2" Text="{Binding FwdTo}" VerticalAlignment="Center"/><TextBlock Grid.Column="3" Text="{Binding EnabledDisplay}" VerticalAlignment="Center"/><StackPanel Grid.Column="4" Orientation="Horizontal" Spacing="8" VerticalAlignment="Center"><Button Content="{Binding ToggleButtonText}" Command="{Binding ToggleEnabledCommand, RelativeSource={RelativeSource AncestorType=views:CallForwardingView}}" CommandParameter="{Binding}"/><Button Content="Delete" Command="{Binding DeleteRuleCommand, RelativeSource={RelativeSource AncestorType=views:CallForwardingView}}" CommandParameter="{Binding}"/></StackPanel></Grid></Border></DataTemplate></ItemsControl.ItemTemplate></ItemsControl></ScrollViewer><StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Left" Spacing="8" Margin="0,8,0,0"><Button Content="Refresh" Command="{Binding RetrieveFromServerCommand}" IsEnabled="{Binding !IsBusy}"/><TextBlock Text="Loading..." VerticalAlignment="Center" Opacity="0.6" IsVisible="{Binding IsBusy}"/></StackPanel></Grid></Border></UserControl>